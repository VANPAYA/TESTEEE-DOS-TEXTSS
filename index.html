<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>日本語テキストラボ — N5 (Textos + Estruturas)</title>

  <style>
    :root{
      --bg0:#F6F8FF;
      --bg1:#EEF3FF;
      --card: rgba(255,255,255,.82);
      --card2: rgba(255,255,255,.72);
      --stroke: rgba(15,25,45,.12);
      --stroke2: rgba(15,25,45,.10);
      --text:#0E1630;
      --muted: rgba(14,22,48,.72);
      --muted2: rgba(14,22,48,.55);

      --accent: #4F46E5;
      --accent2:#06B6D4;
      --accent3:#F97316;

      --good:#16a34a;
      --bad:#ef4444;
      --warn:#f59e0b;

      --radius:18px;
      --shadow: 0 18px 55px rgba(15,25,45,.10);
      --shadow2: 0 12px 40px rgba(15,25,45,.08);

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:
        radial-gradient(1200px 520px at 15% 0%, rgba(79,70,229,.10), transparent 55%),
        radial-gradient(900px 520px at 85% 10%, rgba(6,182,212,.10), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
    }

    a{color:inherit}
    .wrap{max-width:1200px;margin:0 auto;padding:22px 18px 38px}

    header{
      display:flex;gap:14px;align-items:flex-start;justify-content:space-between;
      padding:18px 18px 8px;
      position:sticky;top:0;z-index:20;
      background: linear-gradient(180deg, rgba(246,248,255,.94), rgba(246,248,255,.72));
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--stroke2);
    }
    .brand{display:flex;gap:12px;align-items:center;min-width:280px}
    .logo{
      width:44px;height:44px;border-radius:14px;
      background:
        radial-gradient(18px 18px at 30% 30%, rgba(255,255,255,.85), transparent 55%),
        linear-gradient(135deg, rgba(79,70,229,.95), rgba(6,182,212,.85));
      box-shadow: var(--shadow2);
      border:1px solid rgba(255,255,255,.55);
      flex:0 0 auto;
    }
    h1{
      margin:0;
      font-size:16px;
      letter-spacing:.2px;
      line-height:1.15;
    }
    .subtitle{
      margin:4px 0 0;
      font-size:12px;
      color:var(--muted);
    }

    .topControls{
      display:flex;gap:10px;align-items:center;flex-wrap:wrap;
      justify-content:flex-end;
    }

    .search{
      display:flex;align-items:center;gap:8px;
      padding:10px 12px;
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius:14px;
      box-shadow: var(--shadow2);
      min-width: min(520px, 64vw);
    }
    .search input{
      width:100%;
      border:0;
      outline:none;
      background:transparent;
      color:var(--text);
      font-size:14px;
    }
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius:14px;
      box-shadow: var(--shadow2);
      font-size:13px;
      color:var(--muted);
      user-select:none;
      cursor:pointer;
      transition: transform .08s ease, border-color .12s ease;
    }
    .pill:active{transform:scale(.98)}
    .pill strong{color:var(--text);font-weight:700}
    .dot{
      width:10px;height:10px;border-radius:99px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 0 0 4px rgba(79,70,229,.12);
    }

    .tabs{
      margin:18px 0 10px;
      display:flex;gap:10px;flex-wrap:wrap;
    }
    .tab{
      padding:10px 12px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.60);
      color:var(--muted);
      cursor:pointer;
      user-select:none;
      transition: .12s ease;
      font-size:13px;
    }
    .tab.active{
      background: linear-gradient(135deg, rgba(79,70,229,.12), rgba(6,182,212,.12));
      color:var(--text);
      border-color: rgba(79,70,229,.26);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.25fr .85fr;
      gap:14px;
      align-items:start;
    }
    @media (max-width: 980px){
      header{position:relative}
      .grid{grid-template-columns: 1fr}
      .search{min-width: 0; width:100%}
      .brand{min-width:0}
    }

    .card{
      background: linear-gradient(180deg, var(--card), var(--card2));
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .cardHead{
      padding:14px 14px 12px;
      display:flex;justify-content:space-between;align-items:center;gap:12px;
      border-bottom: 1px solid var(--stroke2);
    }
    .cardTitle{
      font-size:14px;
      font-weight:800;
      letter-spacing:.2px;
      margin:0;
    }
    .badge{
      display:inline-flex;align-items:center;gap:6px;
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
      border:1px solid var(--stroke2);
      background: rgba(255,255,255,.55);
      white-space:nowrap;
    }
    .cardBody{padding:14px}
    .hint{color:var(--muted);font-size:12px;line-height:1.45;margin:0}

    .list{display:flex;flex-direction:column;gap:12px}
    .item{
      border:1px solid var(--stroke2);
      border-radius: 16px;
      background: rgba(255,255,255,.58);
      overflow:hidden;
    }
    .itemTop{
      padding:12px 12px 10px;
      display:flex;gap:10px;justify-content:space-between;align-items:flex-start;
    }
    .itemLeft{min-width:0}
    .itemTagRow{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:6px}
    .tag{
      font-size:11px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid var(--stroke2);
      color:var(--muted);
      background: rgba(255,255,255,.55);
    }
    .tag.level{border-color: rgba(79,70,229,.22); color: rgba(45,55,120,.88)}
    .tag.type{border-color: rgba(6,182,212,.24)}
    .tag.common{border-color: rgba(249,115,22,.22)}
    .jp{
      margin:0;
      font-size:18px;
      line-height:1.35;
      letter-spacing:.2px;
      word-break:break-word;
    }
    .reading{
      margin:7px 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.35;
      word-break:break-word;
    }
    .toggle{
      flex:0 0 auto;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.62);
      border-radius: 12px;
      padding:8px 10px;
      cursor:pointer;
      user-select:none;
      font-size:12px;
      color:var(--muted);
      transition: .12s ease;
    }
    .toggle:hover{border-color: rgba(79,70,229,.22)}
    .itemBody{
      padding:0 12px 12px;
      display:none;
    }
    .itemBody.open{display:block}
    .sep{height:1px;background: var(--stroke2); margin:10px 0}

    .kv{
      display:grid;
      grid-template-columns: 120px 1fr;
      gap:8px 10px;
      font-size:13px;
      line-height:1.45;
    }
    .kv b{color:var(--muted);font-weight:700}
    .mono{
      font-family: var(--mono);
      font-size: 12px;
      background: rgba(15,25,45,.05);
      border:1px solid var(--stroke2);
      padding:9px 10px;
      border-radius: 12px;
      overflow:auto;
    }
    .examples{
      display:flex;flex-direction:column;gap:8px;
      margin-top:8px;
    }
    .ex{
      padding:10px 10px;
      border-radius: 14px;
      border:1px solid var(--stroke2);
      background: rgba(255,255,255,.62);
    }
    .ex .exjp{margin:0;font-size:15px;line-height:1.35}
    .ex .expr{margin:6px 0 0;color:var(--muted);font-size:13px;line-height:1.35}
    .small{font-size:12px;color:var(--muted);line-height:1.45;margin:0}
    .rightStack{display:flex;flex-direction:column;gap:14px}

    .mini{
      display:flex;flex-direction:column;gap:10px;
    }
    .miniRow{
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;
    }
    .chip{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 10px;
      border-radius: 999px;
      border:1px solid var(--stroke2);
      background: rgba(255,255,255,.55);
      font-size:12px;
      color:var(--muted);
      cursor:pointer;
      user-select:none;
    }
    .chip.active{
      border-color: rgba(79,70,229,.30);
      color: var(--text);
      background: linear-gradient(135deg, rgba(79,70,229,.10), rgba(6,182,212,.08));
    }
    .stat{
      display:flex;gap:8px;align-items:center;
      padding:10px 12px;
      border-radius: 16px;
      border:1px solid var(--stroke2);
      background: rgba(255,255,255,.55);
      font-size:12px;
      color:var(--muted);
    }
    .stat strong{color:var(--text)}
    footer{
      margin:18px 0 0;
      color:var(--muted);
      font-size:12px;
      text-align:center;
    }
  </style>
</head>

<body>
  <header>
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1>日本語テキストラボ — N5</h1>
        <p class="subtitle">Textos cotidianos + estruturas que mais se repetem (com explicações em PT-BR).</p>
      </div>
    </div>

    <div class="topControls">
      <div class="search" role="search">
        <span class="dot" aria-hidden="true"></span>
        <input id="q" type="search" placeholder="Buscar (ex.: です, ましょう, から, います, ください, きょう, スーパー...)" />
      </div>
      <div class="pill" id="resetBtn" title="Limpar busca e filtros">
        <strong>Reset</strong>
      </div>
    </div>
  </header>

  <div class="wrap">
    <div class="tabs" role="tablist" aria-label="Seções">
      <div class="tab active" data-tab="texts" role="tab" aria-selected="true">Textos N5 (cotidiano)</div>
      <div class="tab" data-tab="structures" role="tab" aria-selected="false">Estruturas N5 + frases</div>
      <div class="tab" data-tab="quick" role="tab" aria-selected="false">Checklist rápido (N5)</div>
    </div>

    <div class="grid">
      <section class="card" id="mainCard">
        <div class="cardHead">
          <h2 class="cardTitle" id="mainTitle">Textos N5 (cotidiano)</h2>
          <div class="badge" id="countBadge">0 itens</div>
        </div>
        <div class="cardBody">
          <p class="hint" id="mainHint">
            Clique em “Ver detalhes” para abrir explicação, vocabulário chave e estruturas usadas.
            Tudo aqui é comum do dia a dia e bem “cara de JLPT N5”.
          </p>
          <div class="sep"></div>
          <div class="list" id="list"></div>
        </div>
      </section>

      <aside class="rightStack">
        <section class="card">
          <div class="cardHead">
            <h2 class="cardTitle">Filtros</h2>
            <div class="badge">N5 • comum</div>
          </div>
          <div class="cardBody">
            <div class="mini">
              <p class="small">Filtre por tipo de conteúdo (sem mudar o resto do site):</p>
              <div class="miniRow" id="typeChips"></div>
              <div class="stat" id="statLine"><span class="dot" aria-hidden="true"></span><strong>0</strong> resultados</div>
              <p class="small">Dica: busque por partículas (は/が/を/に/で), tempos (ました/ません) ou pedidos (ください).</p>
            </div>
          </div>
        </section>

        <section class="card">
          <div class="cardHead">
            <h2 class="cardTitle">Estruturas que mais caem</h2>
            <div class="badge">N5 core</div>
          </div>
          <div class="cardBody">
            <p class="small" style="margin-top:0">
              Aqui estão as “formas padrão” que se repetem o tempo todo. Elas também aparecem nos textos.
            </p>
            <div class="mono" id="coreBox"></div>
          </div>
        </section>
      </aside>
    </div>

    <footer>
      Feito para treino rápido: ler → entender a estrutura → repetir em outros contextos.
    </footer>
  </div>

  <script>
    // =========================
    // DADOS (N5 / cotidiano)
    // =========================
    const TEXTS = [
      {
        id:"t01",
        level:"N5",
        type:"Texto",
        common:"Cotidiano",
        title:"Manhã corrida (casa → estação)",
        jp:`きょうは ７じに おきました。あさごはんを たべて、コーヒーを のみました。８じに えきへ いきました。でんしゃは こんでいました。`,
        reading:`Kyō wa shichi-ji ni okimashita. Asa-gohan o tabete, kōhī o nomimashita. Hachi-ji ni eki e ikimashita. Densha wa konde imashita.`,
        pt:`Hoje eu acordei às 7. Eu comi café da manhã e bebi café. Às 8 eu fui para a estação. O trem estava cheio.`,
        vocab:[
          ["きょう","hoje"],
          ["おきます","acordar (polido)"],
          ["あさごはん","café da manhã"],
          ["えき","estação"],
          ["でんしゃ","trem"],
          ["こんでいます","estar cheio/lotado"]
        ],
        grammar:[
          ["～じに","marcador de horário: “às ~ horas”"],
          ["Vて、V","sequência de ações: “faço X e (depois) faço Y”"],
          ["～へ / ～に いきます","ir para ~ (direção/destino)"],
          ["～ています","estado/condição atual (ex.: lotado)"]
        ],
        patterns:["～じに","Vて、V","～へ いきます","～ています"]
      },
      {
        id:"t02",
        level:"N5",
        type:"Texto",
        common:"Cotidiano",
        title:"No konbini (pedido simples)",
        jp:`コンビニで おにぎりを ２つ かいました。あたたかい おちゃも ください。レジで カードで はらいました。`,
        reading:`Konbini de onigiri o futatsu kaimashita. Atatakai ocha mo kudasai. Reji de kādo de haraimashita.`,
        pt:`No konbini eu comprei dois onigiri. Também, por favor, um chá quente. No caixa eu paguei com cartão.`,
        vocab:[
          ["コンビニ","loja de conveniência"],
          ["おにぎり","bolinho de arroz"],
          ["２つ","dois (contador para coisas)"],
          ["あたたかい","quente (temperatura)"],
          ["ください","por favor (pedido)"],
          ["はらいます","pagar"]
        ],
        grammar:[
          ["Nを かいます","comprar algo"],
          ["Nも","“também”"],
          ["Nで","meio/local (aqui: meio de pagamento “com cartão”)"],
          ["ください","pedido direto e comum"]
        ],
        patterns:["Nを かいます","Nも","Nで","ください"]
      },
      {
        id:"t03",
        level:"N5",
        type:"Texto",
        common:"Cotidiano",
        title:"Perguntando localização (na rua)",
        jp:`すみません。ゆうびんきょくは どこですか。まっすぐ いって、みぎに まがってください。`,
        reading:`Sumimasen. Yūbinkyoku wa doko desu ka. Massugu itte, migi ni magatte kudasai.`,
        pt:`Com licença. Onde fica o correio? Vá reto e vire à direita, por favor.`,
        vocab:[
          ["すみません","com licença / desculpe"],
          ["ゆうびんきょく","correio"],
          ["どこ","onde"],
          ["まっすぐ","reto"],
          ["みぎ","direita"],
          ["まがります","virar"]
        ],
        grammar:[
          ["Nは どこですか","pergunta de localização"],
          ["Vてください","pedido / instrução educada"],
          ["みぎ/ひだりに まがります","virar para a direita/esquerda"]
        ],
        patterns:["Nは どこですか","Vてください"]
      },
      {
        id:"t04",
        level:"N5",
        type:"Texto",
        common:"Cotidiano",
        title:"Restaurante (preferência + pedido)",
        jp:`わたしは さかなが すきです。でも、きょうは にくを たべたいです。みずを ください。`,
        reading:`Watashi wa sakana ga suki desu. Demo, kyō wa niku o tabetai desu. Mizu o kudasai.`,
        pt:`Eu gosto de peixe. Mas hoje eu quero comer carne. Por favor, água.`,
        vocab:[
          ["さかな","peixe"],
          ["すき","gostar"],
          ["でも","mas"],
          ["にく","carne"],
          ["たべたい","querer comer"],
          ["みず","água"]
        ],
        grammar:[
          ["Nが すきです","gosto de ~"],
          ["でも","contraste: “mas”"],
          ["Vたいです","desejo: “quero fazer ~”"],
          ["Nを ください","pedido simples: “~ por favor”"]
        ],
        patterns:["Nが すきです","でも","Vたいです","Nを ください"]
      },
      {
        id:"t05",
        level:"N5",
        type:"Texto",
        common:"Cotidiano",
        title:"Trabalho/estudo (rotina)",
        jp:`まいにち ９じから ５じまで はたらきます。よるは うちで にほんごを べんきょうします。ねるまえに ほんを よみます。`,
        reading:`Mainichi ku-ji kara go-ji made hatarakimasu. Yoru wa uchi de nihongo o benkyō shimasu. Neru mae ni hon o yomimasu.`,
        pt:`Todos os dias eu trabalho das 9 às 5. À noite eu estudo japonês em casa. Antes de dormir eu leio um livro.`,
        vocab:[
          ["まいにち","todo dia"],
          ["～から ～まで","de ~ até ~"],
          ["はたらきます","trabalhar"],
          ["よる","noite"],
          ["べんきょうします","estudar"],
          ["ねるまえに","antes de dormir"]
        ],
        grammar:[
          ["～から ～まで","intervalo (tempo)"],
          ["Nで","local da ação (em casa)"],
          ["まえに","antes de (fazer algo)"]
        ],
        patterns:["～から ～まで","Nで","まえに"]
      },
      {
        id:"t06",
        level:"N5",
        type:"Texto",
        common:"Cotidiano",
        title:"Clima e planos (futuro próximo)",
        jp:`あしたは あめが ふるそうです。だから、かさを もって いきます。ひるは ともだちと カフェに いきます。`,
        reading:`Ashita wa ame ga furusō desu. Dakara, kasa o motte ikimasu. Hiru wa tomodachi to kafe ni ikimasu.`,
        pt:`Amanhã parece que vai chover. Então, eu vou levar guarda-chuva. De tarde eu vou a um café com um amigo.`,
        vocab:[
          ["あした","amanhã"],
          ["あめ","chuva"],
          ["ふります","cair (chuva/neve)"],
          ["だから","então/por isso"],
          ["かさ","guarda-chuva"],
          ["もっていきます","levar (carregar e ir)"]
        ],
        grammar:[
          ["Nが ふります","chover"],
          ["だから","conclusão simples"],
          ["Nと","com (companhia)"],
          ["～に いきます","ir a (lugar)"]
        ],
        patterns:["だから","Nと","～に いきます"]
      },
      {
        id:"t07",
        level:"N5",
        type:"Texto",
        common:"Cotidiano",
        title:"Compras no supermercado",
        jp:`スーパーで やさいと くだものを かいました。たまごは ありませんでした。あした また かいます。`,
        reading:`Sūpā de yasai to kudamono o kaimashita. Tamago wa arimasen deshita. Ashita mata kaimasu.`,
        pt:`No supermercado eu comprei legumes e frutas. Não tinha ovos. Amanhã eu compro de novo.`,
        vocab:[
          ["スーパー","supermercado"],
          ["やさい","legumes/verduras"],
          ["くだもの","frutas"],
          ["たまご","ovo"],
          ["ありませんでした","não tinha (passado)"],
          ["また","de novo"]
        ],
        grammar:[
          ["NとN","e (lista simples)"],
          ["Nは ありませんでした","não havia/ não tinha (passado)"],
          ["また","repetição"]
        ],
        patterns:["NとN","ありませんでした","また"]
      },
      {
        id:"t08",
        level:"N5",
        type:"Texto",
        common:"Cotidiano",
        title:"No hospital (sintoma simples)",
        jp:`きのうから おなかが いたいです。あさは あまり たべませんでした。くすりを のんでも いいですか。`,
        reading:`Kinō kara onaka ga itai desu. Asa wa amari tabemasen deshita. Kusuri o nonde mo ii desu ka.`,
        pt:`Desde ontem minha barriga dói. De manhã eu não comi muito. Posso tomar remédio?`,
        vocab:[
          ["きのう","ontem"],
          ["～から","desde"],
          ["おなか","barriga"],
          ["いたい","doer"],
          ["あまり","(não) muito"],
          ["～てもいいですか","posso? (permissão)"]
        ],
        grammar:[
          ["～から","ponto de início (tempo)"],
          ["Nが いたいです","dói (parte do corpo)"],
          ["あまり Vません","negação com “não muito”"],
          ["Vてもいいですか","pedir permissão"]
        ],
        patterns:["～から","Nが いたいです","あまり Vません","Vてもいいですか"]
      },
      {
        id:"t09",
        level:"N5",
        type:"Texto",
        common:"Cotidiano",
        title:"Chamando alguém (mensagem curta)",
        jp:`いま ひまですか。もし よかったら、きょうの よる でんわしませんか。８じは どうですか。`,
        reading:`Ima hima desu ka. Moshi yokattara, kyō no yoru denwa shimasen ka. Hachi-ji wa dō desu ka.`,
        pt:`Agora você está livre? Se estiver tudo bem, quer ligar hoje à noite? Que tal 8 horas?`,
        vocab:[
          ["いま","agora"],
          ["ひま","livre/sem compromisso"],
          ["もしよかったら","se você quiser / se estiver tudo bem"],
          ["でんわします","telefonar"],
          ["～ませんか","convite educado"],
          ["どうですか","o que acha?"]
        ],
        grammar:[
          ["～ませんか","convite/sugestão (polido)"],
          ["もしよかったら","suaviza o convite"],
          ["Nは どうですか","propor opção (hora/dia)"]
        ],
        patterns:["～ませんか","もしよかったら","Nは どうですか"]
      },
      {
        id:"t10",
        level:"N5",
        type:"Texto",
        common:"Cotidiano",
        title:"Casa (arrumar + proibição)",
        jp:`へやを そうじしました。つくえのうえに ほんが あります。ここで たばこを すっては いけません。`,
        reading:`Heya o sōji shimashita. Tsukue no ue ni hon ga arimasu. Koko de tabako o sutte wa ikemasen.`,
        pt:`Eu limpei o quarto. Em cima da mesa tem um livro. Aqui não pode fumar.`,
        vocab:[
          ["へや","quarto"],
          ["そうじします","limpar"],
          ["つくえ","mesa/escrivaninha"],
          ["うえ","em cima"],
          ["たばこ","cigarro"],
          ["～てはいけません","não pode (proibição)"]
        ],
        grammar:[
          ["Nを V","objeto direto com を"],
          ["Nの うえに Nが あります","localização: em cima de ~ tem ~"],
          ["Vてはいけません","proibição"]
        ],
        patterns:["Nの うえに","Nが あります","Vてはいけません"]
      }
    ];

    const STRUCTURES = [
      {
        id:"s01",
        level:"N5",
        type:"Estrutura",
        common:"Core",
        title:"A = B (です / じゃありません / でした / じゃありませんでした)",
        pattern:"N は N です",
        use:"Frase básica de identificação/afirmação. Varia para negativo e passado.",
        notes:[
          "は marca o tópico. (Não é 'igual' a 'é' do português; é tópico/tema.)",
          "Negativo: じゃありません (polido). Passado: でした. Passado negativo: じゃありませんでした."
        ],
        examples:[
          ["わたしは がくせいです。","Eu sou estudante."],
          ["わたしは がくせいじゃありません。","Eu não sou estudante."],
          ["きのうは げつようびでした。","Ontem foi segunda-feira."],
          ["あれは わたしの かさじゃありませんでした。","Aquilo não era meu guarda-chuva."],
          ["この みせは しずかです。","Esta loja é tranquila/silenciosa."]
        ]
      },
      {
        id:"s02",
        level:"N5",
        type:"Estrutura",
        common:"Core",
        title:"Existência (あります / います)",
        pattern:"N が あります / N が います",
        use:"Dizer que algo existe/tem (inanimado) ou alguém/animal está/tem (animado).",
        notes:[
          "あります: coisas/objetos/plantas (geralmente).",
          "います: pessoas/animais.",
          "Passado: ありました / いました. Negativo: ありません / いません."
        ],
        examples:[
          ["つくえのうえに ほんが あります。","Há um livro em cima da mesa."],
          ["こうえんに ねこが います。","Tem um gato no parque."],
          ["きょうは じかんが あります。","Hoje eu tenho tempo."],
          ["きのうは おかねが ありませんでした。","Ontem eu não tinha dinheiro."],
          ["ともだちは うちに いません。","Meu amigo não está em casa."]
        ]
      },
      {
        id:"s03",
        level:"N5",
        type:"Estrutura",
        common:"Core",
        title:"Localização (に / で / へ)",
        pattern:"Nに / Nで / Nへ",
        use:"Partículas mais frequentes: destino/local de existência (に), local da ação (で), direção (へ).",
        notes:[
          "に: destino (いきます), localização (います/あります), tempo (７じに).",
          "で: lugar onde a ação acontece (たべます, はたらきます).",
          "へ: direção (parecido com に para 'ir', bem comum em placas)."
        ],
        examples:[
          ["７じに おきます。","Eu acordo às 7."],
          ["がっこうに いきます。","Vou para a escola."],
          ["へやに ねこが います。","Tem um gato no quarto."],
          ["スーパーで かいます。","Compro no supermercado."],
          ["えきへ いきます。","Vou em direção à estação."]
        ]
      },
      {
        id:"s04",
        level:"N5",
        type:"Estrutura",
        common:"Core",
        title:"Sequência de ações (て-forma)",
        pattern:"Vて、Vます",
        use:"Falar ações em sequência (e depois...).",
        notes:[
          "Muito comum em rotinas (acordo, como, vou...).",
          "Não é necessariamente 'e' do português; é fluxo de ações."
        ],
        examples:[
          ["あさごはんを たべて、コーヒーを のみます。","Eu como café da manhã e bebo café."],
          ["シャワーを あびて、がっこうへ いきます。","Tomo banho e vou para a escola."],
          ["かえって、すぐ ねます。","Eu volto (para casa) e durmo logo."],
          ["まどを あけて、へやを そうじします。","Abro a janela e limpo o quarto."],
          ["でんしゃに のって、かいしゃへ いきました。","Peguei o trem e fui para a empresa. (passado)"]
        ]
      },
      {
        id:"s05",
        level:"N5",
        type:"Estrutura",
        common:"Cotidiano",
        title:"Pedido (ください / Vてください)",
        pattern:"Nを ください / Vてください",
        use:"Pedir coisas e pedir ações (bem comum em loja/restaurante/rua).",
        notes:[
          "Nをください = “~ por favor” (um item).",
          "Vてください = “por favor, faça ~” (uma ação)."
        ],
        examples:[
          ["みずを ください。","Água, por favor."],
          ["これを ください。","Este aqui, por favor."],
          ["ゆっくり はなしてください。","Por favor, fale devagar."],
          ["ここに なまえを かいてください。","Por favor, escreva o nome aqui."],
          ["まっすぐ いってください。","Por favor, vá reto."]
        ]
      },
      {
        id:"s06",
        level:"N5",
        type:"Estrutura",
        common:"Cotidiano",
        title:"Desejo (Vたいです / Vたくないです / Vたかったです)",
        pattern:"Vたいです",
        use:"Dizer “quero fazer ~” (bem cotidiano).",
        notes:[
          "Negativo: Vたくないです (não quero).",
          "Passado: Vたかったです (queria).",
          "Pergunta: Vたいですか (quer?)."
        ],
        examples:[
          ["にほんごを べんきょうしたいです。","Quero estudar japonês."],
          ["きょうは うちに かえりたいです。","Hoje eu quero voltar pra casa."],
          ["あしたは えいがを みたくないです。","Amanhã eu não quero ver filme."],
          ["きのうは すしを たべたかったです。","Ontem eu queria comer sushi."],
          ["いま なにを したいですか。","O que você quer fazer agora?"]
        ]
      },
      {
        id:"s07",
        level:"N5",
        type:"Estrutura",
        common:"Core",
        title:"Convite/sugestão (～ましょう / ～ませんか)",
        pattern:"Vましょう / Vませんか",
        use:"Convidar de forma comum e educada.",
        notes:[
          "ましょう = “vamos ~” (proposta direta).",
          "ませんか = “quer ~?” (convite mais suave)."
        ],
        examples:[
          ["いっしょに いきましょう。","Vamos juntos."],
          ["ちょっと やすみましょう。","Vamos descansar um pouco."],
          ["きょう よる でんわしませんか。","Quer ligar hoje à noite?"],
          ["こんど いっしょに たべませんか。","Da próxima, quer comer junto?"],
          ["あした こうえんへ いきましょうか。","Vamos ao parque amanhã? (proposta com 'ka')"]
        ]
      },
      {
        id:"s08",
        level:"N5",
        type:"Estrutura",
        common:"Cotidiano",
        title:"Permissão e proibição (～てもいいですか / ～てはいけません)",
        pattern:"Vてもいいですか / Vてはいけません",
        use:"Pedir permissão e dizer que algo é proibido.",
        notes:[
          "てもいいですか = “posso?” (super comum).",
          "てはいけません = “não pode” (regras/placas)."
        ],
        examples:[
          ["ここで しゃしんを とっても いいですか。","Posso tirar foto aqui?"],
          ["いま でんわしても いいですか。","Posso ligar agora?"],
          ["この みずを のんでも いいですか。","Posso beber esta água?"],
          ["ここで たばこを すっては いけません。","Aqui não pode fumar."],
          ["へやで おさけを のんでは いけません。","No quarto não pode beber álcool."]
        ]
      },
      {
        id:"s09",
        level:"N5",
        type:"Estrutura",
        common:"Core",
        title:"Gosto / habilidade (すき・じょうず・へた)",
        pattern:"Nが すきです / Nが じょうずです / Nが へたです",
        use:"Opinião e habilidade (muito comum em conversa básica).",
        notes:[
          "すき = gostar. きらい = não gostar.",
          "じょうず/へた = bom/ruim (habilidade)."
        ],
        examples:[
          ["さかなが すきです。","Eu gosto de peixe."],
          ["やさいは きらいじゃありません。","Eu não odeio legumes (não é que eu não goste)."],
          ["にほんごが すきです。","Eu gosto de japonês."],
          ["わたしは うたが じょうずです。","Eu sou bom em cantar."],
          ["スポーツは へたです。","Eu sou ruim em esportes."]
        ]
      },
      {
        id:"s10",
        level:"N5",
        type:"Estrutura",
        common:"Cotidiano",
        title:"Intervalo (～から ～まで) + frequência (まいにち/ときどき)",
        pattern:"～から ～まで / まいにち・ときどき",
        use:"Rotina: horários, frequência e hábito.",
        notes:[
          "から/まで = de/até (tempo/lugar).",
          "まいにち (todo dia), ときどき (às vezes), よく (frequentemente), あまり～ません (não muito)."
        ],
        examples:[
          ["９じから ５じまで はたらきます。","Trabalho das 9 às 5."],
          ["げつようびから きんようびまで がっこうです。","Da segunda à sexta tem escola."],
          ["まいにち コーヒーを のみます。","Eu bebo café todo dia."],
          ["ときどき としょかんへ いきます。","Às vezes vou à biblioteca."],
          ["あまり にくを たべません。","Não como muita carne."]
        ]
      }
    ];

    const CORE_PATTERNS = [
      "NはNです／じゃありません／でした／じゃありませんでした",
      "Nが あります（物）／Nが います（人・動物）",
      "Nに（destino/tempo/存在）・Nで（ação）・Nへ（direção）",
      "Vて、V（sequência de ações）",
      "Nをください／Vてください（pedido）",
      "Vたいです（quero）／Vたくないです（não quero）／Vたかったです（queria）",
      "Vましょう（vamos）／Vませんか（quer? convite）",
      "Vてもいいですか（posso?）／Vてはいけません（não pode）",
      "Nがすきです（gosto）／じょうず・へた（habilidade）",
      "～から～まで（de~até）＋ まいにち／ときどき／あまり～ません"
    ];

    // =========================
    // UI STATE
    // =========================
    const state = {
      tab: "texts",
      q: "",
      type: "all" // all | Texto | Estrutura | Checklist
    };

    const elList = document.getElementById("list");
    const elQ = document.getElementById("q");
    const elCount = document.getElementById("countBadge");
    const elMainTitle = document.getElementById("mainTitle");
    const elMainHint = document.getElementById("mainHint");
    const elTypeChips = document.getElementById("typeChips");
    const elStatLine = document.getElementById("statLine");
    const elCoreBox = document.getElementById("coreBox");

    function esc(s){
      return (s ?? "").toString()
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;");
    }

    function includesQ(obj, q){
      if(!q) return true;
      const hay = [
        obj.title, obj.jp, obj.reading, obj.pt,
        (obj.pattern||""), (obj.use||""),
        ...(obj.patterns||[]),
        ...((obj.vocab||[]).flat()),
        ...((obj.grammar||[]).flat()),
        ...((obj.notes||[]).flat()),
        ...((obj.examples||[]).flat())
      ].join(" ").toLowerCase();
      return hay.includes(q.toLowerCase());
    }

    function buildChips(){
      const chips = [
        {key:"all", label:"Tudo"},
        {key:"Texto", label:"Textos"},
        {key:"Estrutura", label:"Estruturas"},
        {key:"Checklist", label:"Checklist"}
      ];
      elTypeChips.innerHTML = chips.map(c => {
        const active = (state.type === c.key) ? "active" : "";
        return `<span class="chip ${active}" data-type="${c.key}">${esc(c.label)}</span>`;
      }).join("");
      elTypeChips.querySelectorAll(".chip").forEach(ch=>{
        ch.addEventListener("click", ()=>{
          state.type = ch.dataset.type;
          render();
        });
      });
    }

    function renderCore(){
      elCoreBox.innerHTML = CORE_PATTERNS.map((p,i)=>`${(i+1).toString().padStart(2,"0")}. ${esc(p)}`).join("\n");
    }

    function setTabs(){
      document.querySelectorAll(".tab").forEach(t=>{
        const on = t.dataset.tab === state.tab;
        t.classList.toggle("active", on);
        t.setAttribute("aria-selected", on ? "true" : "false");
      });
    }

    function getData(){
      // Tab define o foco principal (o que aparece no card da esquerda)
      if(state.tab === "texts") return TEXTS;
      if(state.tab === "structures") return STRUCTURES;
      if(state.tab === "quick"){
        // render especial
        return [];
      }
      return TEXTS;
    }

    function passesType(item){
      if(state.type === "all") return true;
      if(state.type === "Checklist") return false;
      return item.type === state.type;
    }

    function itemHTML_text(t){
      const vocabHTML = (t.vocab||[]).map(v=>`<div><b>${esc(v[0])}</b></div><div>${esc(v[1])}</div>`).join("");
      const gramHTML = (t.grammar||[]).map(g=>`<div><b>${esc(g[0])}</b></div><div>${esc(g[1])}</div>`).join("");
      const patt = (t.patterns||[]).map(p=>`<span class="tag common">${esc(p)}</span>`).join("");

      return `
        <div class="item" data-id="${esc(t.id)}">
          <div class="itemTop">
            <div class="itemLeft">
              <div class="itemTagRow">
                <span class="tag level">${esc(t.level)}</span>
                <span class="tag type">${esc(t.type)}</span>
                <span class="tag common">${esc(t.common)}</span>
              </div>
              <p class="jp"><strong>${esc(t.title)}</strong><br>${esc(t.jp)}</p>
              <p class="reading">${esc(t.pt)}</p>
            </div>
            <div class="toggle" data-toggle="${esc(t.id)}">Ver detalhes</div>
          </div>
          <div class="itemBody" id="body-${esc(t.id)}">
            <div class="sep"></div>
            <p class="small"><b>Leitura (romaji):</b><br>${esc(t.reading)}</p>
            <div class="sep"></div>
            <p class="small"><b>Estruturas usadas:</b> ${patt || "<span class='tag'>—</span>"}</p>
            <div class="sep"></div>
            <div class="kv">
              <b>Vocabulário</b><span></span>
              ${vocabHTML || "<div><b>—</b></div><div>—</div>"}
            </div>
            <div class="sep"></div>
            <div class="kv">
              <b>Gramática</b><span></span>
              ${gramHTML || "<div><b>—</b></div><div>—</div>"}
            </div>
          </div>
        </div>
      `;
    }

    function itemHTML_structure(s){
      const notes = (s.notes||[]).map(n=>`<li>${esc(n)}</li>`).join("");
      const ex = (s.examples||[]).map(e=>`
        <div class="ex">
          <p class="exjp">${esc(e[0])}</p>
          <p class="expr">${esc(e[1])}</p>
        </div>
      `).join("");

      return `
        <div class="item" data-id="${esc(s.id)}">
          <div class="itemTop">
            <div class="itemLeft">
              <div class="itemTagRow">
                <span class="tag level">${esc(s.level)}</span>
                <span class="tag type">${esc(s.type)}</span>
                <span class="tag common">${esc(s.common)}</span>
              </div>
              <p class="jp"><strong>${esc(s.title)}</strong></p>
              <p class="reading"><b>Padrão:</b> ${esc(s.pattern)}<br><b>Uso:</b> ${esc(s.use)}</p>
            </div>
            <div class="toggle" data-toggle="${esc(s.id)}">Ver detalhes</div>
          </div>
          <div class="itemBody" id="body-${esc(s.id)}">
            <div class="sep"></div>
            <p class="small"><b>Notas (PT-BR):</b></p>
            <div class="mono">${notes ? "• " + notes.replaceAll("</li><li>","\n• ").replaceAll("<li>","").replaceAll("</li>","") : "—"}</div>
            <div class="sep"></div>
            <p class="small"><b>Frases de exemplo (variando contexto/tempo/negação):</b></p>
            <div class="examples">${ex}</div>
          </div>
        </div>
      `;
    }

    function renderQuick(){
      elMainTitle.textContent = "Checklist rápido (N5)";
      elMainHint.textContent = "Revisão em 2 minutos: bater o olho e lembrar a função. Busque no campo acima para achar exemplos nos textos/estruturas.";
      const bullets = CORE_PATTERNS.map(p=>`<div class="ex"><p class="exjp">${esc(p)}</p><p class="expr">Se aparecer no texto, tente substituir palavras e repetir em outro contexto.</p></div>`).join("");
      elList.innerHTML = `
        <div class="item">
          <div class="itemTop">
            <div class="itemLeft">
              <div class="itemTagRow">
                <span class="tag level">N5</span>
                <span class="tag type">Checklist</span>
                <span class="tag common">Essencial</span>
              </div>
              <p class="jp"><strong>10 estruturas que mais se repetem</strong></p>
              <p class="reading">Treine: leia → troque o vocabulário → mantenha a mesma estrutura.</p>
            </div>
            <div class="toggle" data-toggle="check">Ver detalhes</div>
          </div>
          <div class="itemBody open" id="body-check">
            <div class="sep"></div>
            <div class="examples">${bullets}</div>
          </div>
        </div>
      `;
      const total = CORE_PATTERNS.length;
      elCount.textContent = `${total} itens`;
      elStatLine.innerHTML = `<span class="dot" aria-hidden="true"></span><strong>${total}</strong> itens`;
    }

    function wireToggles(){
      document.querySelectorAll("[data-toggle]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const id = btn.getAttribute("data-toggle");
          const body = document.getElementById("body-"+id);
          if(!body) return;
          body.classList.toggle("open");
          btn.textContent = body.classList.contains("open") ? "Fechar" : "Ver detalhes";
        });
      });
    }

    function render(){
      setTabs();
      buildChips();

      if(state.tab === "texts"){
        elMainTitle.textContent = "Textos N5 (cotidiano)";
        elMainHint.textContent = "Textos curtos e comuns do dia a dia, com vocabulário e gramática em PT-BR.";
      } else if(state.tab === "structures"){
        elMainTitle.textContent = "Estruturas N5 + frases";
        elMainHint.textContent = "Estruturas que mais se repetem + várias frases de exemplo (mudando contexto, tempo e negação).";
      } else {
        // quick
        renderQuick();
        wireToggles();
        return;
      }

      const data = getData();

      const filtered = data
        .filter(it => passesType(it))
        .filter(it => includesQ(it, state.q));

      // Render lista
      elList.innerHTML = filtered.map(it=>{
        if(it.type === "Texto") return itemHTML_text(it);
        if(it.type === "Estrutura") return itemHTML_structure(it);
        return "";
      }).join("") || `<div class="item"><div class="itemTop"><div class="itemLeft">
        <p class="jp"><strong>Nenhum resultado</strong></p>
        <p class="reading">Tente buscar por: です, ました, ません, ください, います, あります, から, まで, どこ, どうですか…</p>
      </div></div></div>`;

      elCount.textContent = `${filtered.length} itens`;
      elStatLine.innerHTML = `<span class="dot" aria-hidden="true"></span><strong>${filtered.length}</strong> resultados`;

      wireToggles();
    }

    // =========================
    // EVENTOS
    // =========================
    document.querySelectorAll(".tab").forEach(t=>{
      t.addEventListener("click", ()=>{
        state.tab = t.dataset.tab;
        render();
      });
    });

    elQ.addEventListener("input", ()=>{
      state.q = elQ.value.trim();
      render();
    });

    document.getElementById("resetBtn").addEventListener("click", ()=>{
      state.q = "";
      elQ.value = "";
      state.type = "all";
      render();
    });

    // init
    renderCore();
    buildChips();
    render();
  </script>
</body>
</html>
